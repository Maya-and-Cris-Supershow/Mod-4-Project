(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function o(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?a.credentials="include":e.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function c(e){if(e.ep)return;e.ep=!0;const a=o(e);fetch(e.href,a)}})();const U=(t,n)=>{try{localStorage.setItem(t,JSON.stringify(n))}catch(o){throw new Error(o)}},F=t=>JSON.parse(localStorage.getItem(t)),J=()=>{U("ponies",[])},g=()=>F("ponies"),K=t=>{const n=g();for(let o=0;o<n.length;o++)if(n[o].id===t.id)return;n.push(t),U("ponies",n)},E=t=>{const n=document.querySelector("#scroller-wrapper");n.innerHTML="",t.forEach(o=>n.appendChild(o.pony)),n.onclick=async o=>{if(o.target.tagName!=="IMG")return;const c=await z(Number(o.target.dataset.id)),e=$(c.data[0],o.target.src);document.querySelector("#modal-wrapper").appendChild(e),document.querySelector("#modal-wrapper").style.display="block"}},j=t=>{const n=document.querySelector("#local-ponies");n.innerHTML="",t.forEach(o=>{const{image:c,name:e,id:a}=o;n.append(h(c[0],e,a))})},h=(t,n,o)=>{const c=document.createElement("img");return c.className="scroll-pony",c.src=t,c.draggable=!1,c.dataset.name=n,c.dataset.id=o,c},$=(t,n)=>{const{name:o,alias:c,kind:e,occupation:a,residence:r,sex:l,url:s,image:i,id:V}=t;document.querySelector("#modal-wrapper").innerHTML="";const u=document.createElement("div");u.id="modal-content";const x=document.createElement("h2");x.textContent=o.replace(/_/g," ");const v=document.createElement("img");v.src=n;const f=document.createElement("button");f.textContent="Add to favorites",f.addEventListener("click",m=>{K(t),j(g())}),u.append(x,v,f);const R=document.createElement("h2");R.textContent=o.replace(/_/g," ");const w=document.createElement("div"),C=document.createElement("p"),S=document.createElement("h3");S.textContent="Alias:",C.textContent=c,w.append(S,C);const b=document.createElement("div"),L=document.createElement("h3");L.textContent="Kind:";const N=document.createElement("ul");e.forEach(m=>{if(m==="Human")return;const d=document.createElement("li");d.textContent=m,N.appendChild(d)}),b.append(L,N);const P=document.createElement("div"),k=document.createElement("p"),A=document.createElement("h3");A.textContent="Occupation:",k.textContent=a,P.append(A,k);const O=document.createElement("div"),q=document.createElement("h3"),D=document.createElement("p");q.textContent="Residence:",D.innerHTML=r,O.append(q,D);const I=document.createElement("div"),M=document.createElement("h3"),T=document.createElement("p");M.textContent="Sex:",T.textContent=l,I.append(M,T);const _=document.createElement("div"),p=document.createElement("a"),H=document.createElement("h3");p.href=s,p.textContent=s,p.target="_blank",H.textContent="Url:",_.append(H,p);const y=document.createElement("div");return y.className="modal-image-wrapper",i.forEach(m=>{const d=document.createElement("img");d.className="modal-image",d.src=m,y.appendChild(d)}),u.append(w,b,P,O,I,_,y),u},B=async(t,n={})=>{try{const o=await fetch(t,n);if(!o.ok)throw new Error(`Error fetching data at ${t}`);return await o.json()}catch(o){return console.warn(o),null}},G=async()=>{const{data:t}=await B("https://ponyapi.net/v1/character/all? limit=563");return t},z=async t=>await B(`https://ponyapi.net/v1/character/${t}`),Q=async()=>{const t=(r=1)=>{for(let l=0;l<r;l++){const s=Number(e[0].index)===0?c.length-1:Number(e[0].index)-1;console.log(s);const i=c[s];e.unshift({pony:h(i.image[0],i.name.replace(/\s/g,"_"),i.id),index:s}),e.pop()}E(e)},n=async(r=1)=>{for(let l=0;l<r;l++){const s=Number(e[e.length-1].index)===c.length-1?0:Number(e[e.length-1].index)+1,i=c[s];e.push({index:s,pony:h(i.image[0],i.name.replace(/\s/g,"_"),i.id)}),e.shift()}E(e)},o=async r=>{r.target.dataset.direction==="left"?t():n()},c=await G();console.log(c[0]);const e=[];for(let r=0;r<5;r++)e[r]={index:r,pony:h(c[r].image[0],c[r].name.replace(/\s/g,"_"),c[r].id)};document.querySelectorAll(".direction-scroll").forEach(r=>{r.addEventListener("click",o)}),document.body.addEventListener("keydown",r=>{switch(r.key){case"ArrowLeft":t();break;case"ArrowRight":n();break;case"ArrowUp":n(5);break;case"ArrowDown":t(5);break}}),document.querySelector("#modal-wrapper").addEventListener("click",r=>{r.target.tagName==="SECTION"&&(r.target.style.display="none")}),E(e),g()||J();const a=g();j(a)};Q();
