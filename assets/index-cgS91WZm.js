(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function o(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?a.credentials="include":e.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function c(e){if(e.ep)return;e.ep=!0;const a=o(e);fetch(e.href,a)}})();const _=(t,n)=>{try{localStorage.setItem(t,JSON.stringify(n))}catch(o){throw new Error(o)}},B=t=>JSON.parse(localStorage.getItem(t)),R=()=>{_("ponies",[])},g=()=>B("ponies"),F=t=>{const n=g();for(let o=0;o<n.length;o++)if(n[o].id===t.id)return;n.push(t),_("ponies",n)},E=t=>{const n=document.querySelector("#scroller-wrapper");n.innerHTML="",t.forEach(o=>n.appendChild(o.pony)),n.onclick=async o=>{if(o.target.tagName!=="IMG")return;const c=await $(Number(o.target.dataset.id)),e=J(c.data[0],o.target.src);document.querySelector("#modal-wrapper").appendChild(e),document.querySelector("#modal-wrapper").style.display="block"}},H=t=>{const n=document.querySelector("#local-ponies");n.innerHTML="",t.forEach(o=>{const{image:c,name:e,id:a}=o;n.append(h(c[0],e,a))})},h=(t,n,o)=>{const c=document.createElement("img");return c.className="scroll-pony",c.src=t,c.draggable=!1,c.dataset.name=n,c.dataset.id=o,c},J=(t,n)=>{const{name:o,alias:c,kind:e,occupation:a,residence:r,sex:d,url:i,image:s,id:z}=t;document.querySelector("#modal-wrapper").innerHTML="";const u=document.createElement("div");u.id="modal-content";const v=document.createElement("h2");v.textContent=o.replace(/_/g," ");const w=document.createElement("img");w.src=n;const f=document.createElement("button");f.textContent="Add to favorites",f.addEventListener("click",m=>{F(t),H(g())}),u.append(v,w,f);const j=document.createElement("h2");j.textContent=o.replace(/_/g," ");const x=document.createElement("div");x.textContent=c;const C=document.createElement("div"),S=document.createElement("h3");S.textContent="Kind:";const b=document.createElement("ul");e.forEach(m=>{if(m==="Human")return;const l=document.createElement("li");l.textContent=m,b.appendChild(l)}),C.append(S,b);const L=document.createElement("div"),N=document.createElement("p"),P=document.createElement("h3");P.textContent="Occupation:",N.textContent=a,L.append(P,N);const k=document.createElement("div"),O=document.createElement("h3"),A=document.createElement("p");O.textContent="Residence:",A.innerHTML=r,k.append(O,A);const q=document.createElement("div"),D=document.createElement("h3"),I=document.createElement("p");D.textContent="Sex:",I.textContent=d,q.append(D,I);const M=document.createElement("div"),p=document.createElement("a"),T=document.createElement("h3");p.href=i,p.textContent=i,p.target="_blank",T.textContent="Url:",M.append(T,p);const y=document.createElement("div");return y.className="modal-image-wrapper",s.forEach(m=>{const l=document.createElement("img");l.className="modal-image",l.src=m,y.appendChild(l)}),u.append(x,C,L,k,q,M,y),u},U=async(t,n={})=>{try{const o=await fetch(t,n);if(!o.ok)throw new Error(`Error fetching data at ${t}`);return await o.json()}catch(o){return console.warn(o),null}},K=async()=>{const{data:t}=await U("https://ponyapi.net/v1/character/all");return t},$=async t=>await U(`https://ponyapi.net/v1/character/${t}`),G=async()=>{const t=(r=1)=>{for(let d=0;d<r;d++){const i=Number(e[0].index)===0?c.length-1:Number(e[0].index)-1,s=c[i];e.unshift({pony:h(s.image[0],s.name.replace(/\s/g,"_"),s.id),index:i}),e.pop()}E(e)},n=async(r=1)=>{for(let d=0;d<r;d++){const i=Number(e[e.length-1].index)===c.length-1?0:Number(e[e.length-1].index)+1,s=c[i];e.push({index:i,pony:h(s.image[0],s.name.replace(/\s/g,"_"),s.id)}),e.shift()}E(e)},o=async r=>{r.target.dataset.direction==="left"?t():n()},c=await K();console.log(c[0]);const e=[];for(let r=0;r<5;r++)e[r]={index:r,pony:h(c[r].image[0],c[r].name.replace(/\s/g,"_"),c[r].id)};document.querySelectorAll(".direction-scroll").forEach(r=>{r.addEventListener("click",o)}),document.body.addEventListener("keydown",r=>{switch(r.key){case"ArrowLeft":t();break;case"ArrowRight":n();break;case"ArrowUp":n(5);break;case"ArrowDown":t(5);break}}),document.querySelector("#modal-wrapper").addEventListener("click",r=>{r.target.tagName==="SECTION"&&(r.target.style.display="none")}),E(e),g()||R();const a=g();H(a)};G();
